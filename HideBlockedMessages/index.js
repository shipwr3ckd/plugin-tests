(function(s,l,u,m,o,f,p,a){"use strict";const{FormSwitchRow:E}=f.Forms;function h(){return p.useProxy(a.storage),React.createElement(l.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(E,{label:"Remove blocked messages",value:a.storage.blocked,onValueChange:function(e){return a.storage.blocked=e}}),React.createElement(E,{label:"Remove ignored messages",value:a.storage.ignored,onValueChange:function(e){return a.storage.ignored=e}}))}const y=m.findByName("RowManager"),S=m.findByProps("getRelationships","isBlocked","isIgnored"),r="HideBlockedAndIgnoredMessages";function A(e,c){let n={id:"",type:0,content:"",channel_id:c.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?n.content=e:n={...n,...e},n}const i=function(e){return e?!!(storage.blocked&&S.isBlocked(e)||storage.ignored&&S.isIgnored(e)):!1};let g=[];const b=function(){try{const e=u.before("dispatch",l.FluxDispatcher,function(n){let[t]=n;if(t.type==="LOAD_MESSAGES_SUCCESS"&&(t.messages=t.messages.filter(function(d){return!i(d?.author?.id)})),t.type==="MESSAGE_CREATE"||t.type==="MESSAGE_UPDATE"){let d=t.message;i(d?.author?.id)&&(t.channelId="0")}});g.push(e);const c=u.before("generate",y.prototype,function(n){let[t]=n;i(t.message?.author?.id)&&(t.renderContentOnly=!0,t.message.content=null,t.message.reactions=[],t.message.canShowComponents=!1,t.rowType===2&&(t.roleStyle="",t.text="[Filtered message. Check plugin settings.]",t.revealed=!1,t.content=[]))});g.push(c),o.logger.log(`${r} loaded.`)}catch(e){o.logger.error(`[${r} Error]`,e)}};var v={onLoad:function(){o.logger.log(`Loading ${r}...`),storage.blocked??=!0,storage.ignored??=!0;for(let e of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])o.logger.log(`Dispatching ${e} to enable handler.`),l.FluxDispatcher.dispatch({type:e,message:A("PLACEHOLDER",{id:"0"}),messages:[]});b()},onUnload:function(){o.logger.log(`Unloading ${r}...`);for(let e of g)e();o.logger.log(`${r} unloaded.`)},settings:h};return s.default=v,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.ui.components,vendetta.storage,vendetta.plugin);
