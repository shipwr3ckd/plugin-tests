(function(l,r,u,E,a,n,f,S){"use strict";const{View:h,ScrollView:p}=r.ReactNative;function y(){return f.useProxy(n.storage),r.React.createElement(p,null,r.React.createElement(h,null,r.React.createElement(S.Forms.FormSwitchRow,{label:"Remove blocked messages",value:n.storage.blocked??!0,onValueChange:function(e){return n.storage.blocked=e},note:""}),r.React.createElement(S.Forms.FormSwitchRow,{label:"Remove ignored messages",value:n.storage.ignored??!0,onValueChange:function(e){return n.storage.ignored=e},note:""})))}const A=E.findByName("RowManager"),m=E.findByProps("getRelationships","isBlocked","isIgnored"),s="HideBlockedAndIgnoredMessages";function R(e,g){let o={id:"",type:0,content:"",channel_id:g.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?o.content=e:o={...o,...e},o}const i=function(e){return e?!!(n.storage.blocked&&m.isBlocked(e)||n.storage.ignored&&m.isIgnored(e)):!1};let c=[];const b=function(){try{const e=u.before("dispatch",r.FluxDispatcher,function(o){let[t]=o;if(t.type==="LOAD_MESSAGES_SUCCESS"&&(t.messages=t.messages.filter(function(d){return!i(d?.author?.id)})),t.type==="MESSAGE_CREATE"||t.type==="MESSAGE_UPDATE"){let d=t.message;i(d?.author?.id)&&(t.channelId="0")}});c.push(e);const g=u.before("generate",A.prototype,function(o){let[t]=o;i(t.message?.author?.id)&&(t.renderContentOnly=!0,t.message.content=null,t.message.reactions=[],t.message.canShowComponents=!1,t.rowType===2&&(t.roleStyle="",t.text="[Filtered message. Check plugin settings.]",t.revealed=!1,t.content=[]))});c.push(g),a.logger.log(`${s} loaded.`)}catch(e){a.logger.error(`[${s} Error]`,e)}};var v={onLoad:function(){a.logger.log(`Loading ${s}...`),n.storage.blocked??=!0,n.storage.ignored??=!0;for(let e of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])a.logger.log(`Dispatching ${e} to enable handler.`),r.FluxDispatcher.dispatch({type:e,message:R("PLACEHOLDER",{id:"0"}),messages:[]});b()},onUnload:function(){a.logger.log(`Unloading ${s}...`);for(let e of c)e();a.logger.log(`${s} unloaded.`)},settings:y};return l.default=v,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.plugin,vendetta.storage,vendetta.ui.components);
