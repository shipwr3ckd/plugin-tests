(function(l,o,u,E,r,a,f,m){"use strict";const{View:h,ScrollView:p}=o.ReactNative;function y(){return f.useProxy(a.storage),o.React.createElement(p,null,o.React.createElement(h,null,o.React.createElement(m.Forms.FormSwitchRow,{label:"Remove blocked messages",value:a.storage.blocked??!0,onValueChange:function(e){return a.storage.blocked=e},note:""}),o.React.createElement(m.Forms.FormSwitchRow,{label:"Remove ignored messages",value:a.storage.ignored??!0,onValueChange:function(e){return a.storage.ignored=e},note:""})))}const A=E.findByName("RowManager"),S=E.findByProps("getRelationships","isBlocked","isIgnored"),s="HideBlockedAndIgnoredMessages";function R(e,c){let n={id:"",type:0,content:"",channel_id:c.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?n.content=e:n={...n,...e},n}const i=function(e){return e?!!(storage.blocked&&S.isBlocked(e)||storage.ignored&&S.isIgnored(e)):!1};let g=[];const b=function(){try{const e=u.before("dispatch",o.FluxDispatcher,function(n){let[t]=n;if(t.type==="LOAD_MESSAGES_SUCCESS"&&(t.messages=t.messages.filter(function(d){return!i(d?.author?.id)})),t.type==="MESSAGE_CREATE"||t.type==="MESSAGE_UPDATE"){let d=t.message;i(d?.author?.id)&&(t.channelId="0")}});g.push(e);const c=u.before("generate",A.prototype,function(n){let[t]=n;i(t.message?.author?.id)&&(t.renderContentOnly=!0,t.message.content=null,t.message.reactions=[],t.message.canShowComponents=!1,t.rowType===2&&(t.roleStyle="",t.text="[Filtered message. Check plugin settings.]",t.revealed=!1,t.content=[]))});g.push(c),r.logger.log(`${s} loaded.`)}catch(e){r.logger.error(`[${s} Error]`,e)}};var v={onLoad:function(){r.logger.log(`Loading ${s}...`),storage.blocked??=!0,storage.ignored??=!0;for(let e of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])r.logger.log(`Dispatching ${e} to enable handler.`),o.FluxDispatcher.dispatch({type:e,message:R("PLACEHOLDER",{id:"0"}),messages:[]});b()},onUnload:function(){r.logger.log(`Unloading ${s}...`);for(let e of g)e();r.logger.log(`${s} unloaded.`)},settings:y};return l.default=v,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.plugin,vendetta.storage,vendetta.ui.components);
