(function(s,l,m,S,r,f,p,o){"use strict";const{FormSwitchRow:i}=f.Forms;function h(){return p.useProxy(o.storage),React.createElement(l.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(i,{label:"Suppress Guild",value:o.storage.server,onValueChange:function(e){return o.storage.server=e}}),React.createElement(i,{label:"Suppress @everyone and @here",value:o.storage.everyone,onValueChange:function(e){return o.storage.everyone=e}}),React.createElement(i,{label:"Suppress All Role @mentions",value:o.storage.roles,onValueChange:function(e){return o.storage.roles=e}}))}const y=S.findByName("RowManager"),E=S.findByProps("getRelationships","isBlocked","isIgnored"),a="HideBlockedAndIgnoredMessages";function v(e,d){let n={id:"",type:0,content:"",channel_id:d.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?n.content=e:n={...n,...e},n}const c=function(e){return e?!!(storage.blocked&&E.isBlocked(e)||storage.ignored&&E.isIgnored(e)):!1};let g=[];const A=function(){try{const e=m.before("dispatch",l.FluxDispatcher,function(n){let[t]=n;if(t.type==="LOAD_MESSAGES_SUCCESS"&&(t.messages=t.messages.filter(function(u){return!c(u?.author?.id)})),t.type==="MESSAGE_CREATE"||t.type==="MESSAGE_UPDATE"){let u=t.message;c(u?.author?.id)&&(t.channelId="0")}});g.push(e);const d=m.before("generate",y.prototype,function(n){let[t]=n;c(t.message?.author?.id)&&(t.renderContentOnly=!0,t.message.content=null,t.message.reactions=[],t.message.canShowComponents=!1,t.rowType===2&&(t.roleStyle="",t.text="[Filtered message. Check plugin settings.]",t.revealed=!1,t.content=[]))});g.push(d),r.logger.log(`${a} loaded.`)}catch(e){r.logger.error(`[${a} Error]`,e)}};var C={onLoad:function(){r.logger.log(`Loading ${a}...`),storage.blocked??=!0,storage.ignored??=!0;for(let e of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])r.logger.log(`Dispatching ${e} to enable handler.`),l.FluxDispatcher.dispatch({type:e,message:v("PLACEHOLDER",{id:"0"}),messages:[]});A()},onUnload:function(){r.logger.log(`Unloading ${a}...`);for(let e of g)e();r.logger.log(`${a} unloaded.`)},settings:h};return s.default=C,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.ui.components,vendetta.storage,vendetta.plugin);
