(function(a,s,e){"use strict";e.findByStoreName("MessageStore"),e.findByStoreName("UserStore");const{uploadLocalFiles:d}=e.findByProps("uploadLocalFiles"),c=e.findByProps("getToken").getToken();let o;var u={onLoad(){o=s.registerCommand({name:"quote",displayName:"quote",description:"Quote a replied message as an image",displayDescription:"Quote a replied message as an image",applicationId:"-1",inputType:1,type:1,execute:l})},onUnload(){o?.()}};async function l(S,r){const i=r?.message?.referenced_message;if(!i)return{content:"\u274C Please reply to a message when using `/quote`."};const{content:p,timestamp:m,author:n}=i,g=`https://cdn.discordapp.com/avatars/${n.id}/${n.avatar}.png?size=4096`;try{const t=await fetch("https://quote-cardgen.onrender.com/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p,username:n.username,timestamp:m,avatarUrl:g})});if(!t.ok)return{content:"\u274C Failed to generate quote card."};const y=await(await t.blob()).arrayBuffer(),f=new Uint8Array(y),h={id:Date.now().toString(),filename:"quote.png",mimeType:"image/png",data:f},v={content:"",tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]};return await d([{channelId:r.channel.id,items:[h],parsedMessage:v,token:c}]),null}catch(t){return console.error("Quote error:",t),{content:"\u274C An error occurred while sending the quote."}}}return a.default=u,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.commands,vendetta.metro);
