(function(d,h,o,e,u,a,S){"use strict";const p=o.findByProps("openLazy","hideActionSheet"),y=o.findByProps("ActionSheetRow")?.ActionSheetRow;o.findByStoreName("MessageStore");function R(){h.after("openLazy",p,function(r){let[i,c]=r;c==="MessageLongPressActionSheet"&&i.then(function(f){h.after("default",f,function(g,l){let[E]=g;const t=l?.props?.children?.[1]?.props?.children;if(!t||t.some(function(s){return s?.props?.label==="Edit Message"}))return;const n=t.findIndex(function(s){return s?.props?.label==="Reply"}),B=n>=0?n:t.length;t.splice(B,0,e.React.createElement(y,{label:"Edit Message",icon:e.React.createElement(y.Icon,{source:S.findAssetIdByName("ic_edit_24px")}),onPress:function(){const s=E.message;s&&(p.hideActionSheet(),u.showAlert("Edit Message",e.React.createElement(M,{message:s})))}}))})})})}function M(r){let{message:i}=r;const[c,f]=e.React.useState(i.content),[g,l]=e.React.useState(!1),E=o.findByStoreName("MessageStore");async function t(){l(!0);try{const n={...i,content:c};E.updateMessage(n.channel_id,n.id,n),u.dismissAlert("Edit Message")}catch(n){console.error("Edit failed",n),l(!1)}}return e.React.createElement(a.AlertModal,{title:"Editing Message",content:null,extraContent:e.React.createElement(a.Stack,{style:{marginTop:-12}},e.React.createElement(a.TextInput,{autoFocus:!0,value:c,onChange:f,multiline:!0,numberOfLines:4,returnKeyType:"done",onSubmitEditing:t})),actions:e.React.createElement(a.Stack,null,e.React.createElement(a.Button,{loading:g,text:"Confirm",variant:"primary",disabled:!c.trim(),onPress:t}),e.React.createElement(a.Button,{text:"Cancel",variant:"secondary",onPress:function(){return u.dismissAlert("Edit Message")}}))})}const A=function(){R()},v=function(){import("@vendetta/patcher").then(function(r){let{unpatchAll:i}=r;return i()})};return d.onLoad=A,d.onUnload=v,d})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.components,vendetta.ui.assets);
