(function(o,n,a,c,f,l){"use strict";const r=n.findByProps("openLazy","hideActionSheet"),i=n.findByProps("ActionSheetRow")?.ActionSheetRow;n.findByStoreName("MessageStore"),n.findByStoreName("UserStore");const p=n.findByProps("editMessage"),s=n.findByProps("defaultValue","onChange");let d;const y=function(){d?.()};function g(){d=c.after("openLazy",r,function(A){let[m,P]=A;P==="MessageLongPressActionSheet"&&m.then(function(B){c.after("default",B,function(M,R){let[b]=M;const t=l.findInReactTree(R,function(e){return Array.isArray(e)&&e.some(function(x){return x?.type===i})});if(!t||t.some(function(e){return e?.props?.label==="Edit Message"}))return;const u=t.findIndex(function(e){return e?.props?.label==="Reply"}),v=u>-1?u:Math.max(t.findIndex(function(e){return e?.props?.label==="Copy Text"}),0);t.splice(v,0,a.React.createElement(i,{label:"Edit Message",icon:a.React.createElement(i.Icon,{source:f.getAssetIDByName("ic_edit_24px")}),onPress:function(){const e=b.message;e&&(r.hideActionSheet(),p.editMessage(e.channel_id,e.id),setTimeout(function(){s&&s.setText&&s.setText(e.content)},50))}}))})})})}const h=function(){g()},S=function(){y()};return o.onLoad=h,o.onUnloadPlugin=S,o})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.utils);
