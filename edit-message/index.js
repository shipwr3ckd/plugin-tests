(function(i,n,a,c,l,p){"use strict";const r=n.findByProps("openLazy","hideActionSheet"),s=n.findByProps("ActionSheetRow")?.ActionSheetRow;n.findByStoreName("MessageStore");let d;function h(){d=c.after("openLazy",r,function(S){let[m,M]=S;M==="MessageLongPressActionSheet"&&m.then(function(E){c.after("default",E,function(R,v){let[f]=R;const t=p.findInReactTree(v,function(e){return Array.isArray(e)&&e.some(function(o){return o?.type===s})});if(!t||t.some(function(e){return e?.props?.label==="Edit Message"}))return;const u=t.findIndex(function(e){return e?.props?.label==="Reply"}),B=u>-1?u:Math.max(t.findIndex(function(e){return e?.props?.label==="Copy Text"}),0);t.splice(B,0,a.React.createElement(s,{label:"Edit Message",icon:a.React.createElement(s.Icon,{source:l.getAssetIDByName("ic_pencil_24px")}),onPress:function(){try{const e=f?.message?.channel_id,o=f?.message?.id;if(!e||!o)return;const{startEditMessage:I}=n.findByProps("startEditMessage");I(e,o)}catch(e){console.error("Edit Message error",e)}finally{r.hideActionSheet()}}}))})})})}function y(){d?.()}const g=function(){h()},A=function(){y()};return i.onLoad=g,i.onUnload=A,i})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.utils);
